{% extends "base.html" %}

{% block title %}{% if recipe %}Edit: {{ recipe.title }}{% else %}Add New Recipe{% endif %} - FlavorFind{% endblock %}

{% block content %}
    <div class="row justify-content-center">
        <div class="col-md-8">
             <h1 class="mb-4">{% if recipe %}Edit Your Recipe{% else %}Add a New Personal Recipe{% endif %}</h1>
            {# Bootstrap Alert #}
             <div id="recipe-form-message" class="alert" role="alert" style="display: none;"></div>

            <form id="recipe-form" {% if recipe %}data-mode="edit" data-recipe-id="{{ recipe.recipe_id }}"{% else %}data-mode="create"{% endif %}>
                <div class="mb-3">
                    <label for="title" class="form-label">Recipe Title:</label>
                    <input type="text" class="form-control" id="title" name="title" required value="{{ recipe.title if recipe else '' }}">
                </div>
                <div class="mb-3">
                    <label for="description" class="form-label">Description (Optional):</label>
                    <textarea class="form-control" id="description" name="description" rows="3">{{ recipe.description if recipe else '' }}</textarea>
                </div>
                <div class="mb-3">
                    <label for="ingredients" class="form-label">Ingredients (One per line):</label>
                    <textarea class="form-control" id="ingredients" name="ingredients" rows="8" required placeholder="e.g.
1 cup Flour
2 Eggs
1/2 tsp Salt">{{ recipe.ingredients if recipe else '' }}</textarea>
                </div>
                <div class="mb-3">
                    <label for="instructions" class="form-label">Instructions:</label>
                    <textarea class="form-control" id="instructions" name="instructions" rows="10" required placeholder="e.g.
Step 1: Mix dry ingredients.
Step 2: Add wet ingredients.
...">{{ recipe.instructions if recipe else '' }}</textarea>
                </div>
                <div class="mb-3">
                    <label for="image_url" class="form-label">Image URL (Optional):</label>
                    <input type="url" class="form-control" id="image_url" name="image_url" placeholder="https://example.com/image.jpg" value="{{ recipe.image_url if recipe else '' }}">
                </div>

                <button type="submit" class="btn btn-primary">{% if recipe %}Update Recipe{% else %}Save Recipe{% endif %}</button>
                <a href="{{ url_for('main.my_recipes') }}" class="btn btn-secondary ms-2">Cancel</a>
            </form>
        </div>
    </div>

{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/recipe_form.js') }}"></script>
{% endblock %}